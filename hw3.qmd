---
title: "Homework Assignment 3: Connecticut Schools"
author: "Marcus Arles"
date: "`r Sys.Date()`"
format:
  html:
    toc: true
    toc-depth: 2
    embed-resources: true
    code-fold: true
    theme: cosmo
---

## Context

Data on schools from the Common Core of Data (CCD) are collected by the National Center for Education Statistics. Information about the CCD can be found here. We are working with a subset of the 2013-14 dataset, data/ct_schools in the classnotes repo. A variable codebook for the CCD, which will explain what each column represents in the data file is located in the flat file in the record layout column and 2013-14 row.


## Problem 1: 

Load the appropriate packages and load the data.

### Answer:

```{r}
library(tidyverse)
ct_schools <- read.csv("ct_schools.csv")
head(ct_schools)
```

## Problem 2: Data manipulation


a. Make a new variable sch_type that has the value Charter, Magnet or TPS, to specify if the school is a charter, magnet or traditional public school.

b. How many schools of each of these three types are in our area?

c. Make a table that show the number of schools of each of the three school types that are missing data for free lunch.

### Answer:

a. 

```{r}
ct_schools <- ct_schools %>%
  mutate(
    sch_type = case_when(
      MAGNET == 1 ~ "Magnet",
      CHARTR == 1 ~ "Charter",
      MAGNET == 2 & CHARTR == 2 ~ "TPS",
      TRUE ~ NA_character_ 
    )
  )
```

b. 

```{r}
ct_schools %>%
  count(sch_type)
```

c. 

```{r}
ct_schools %>%
group_by(sch_type) %>%
  summarise(
    n = n(),
    n_missing_free_lunch = sum(is.na(FRELCH)),
    pct_missing = mean(is.na(FRELCH)) * 100
  )
```

## Problem 3: Descriptives

a. How many schools are elementary schools? Middle schools? High schools? Other? Missing?

b. How many schools are eligible for Title I status? Summarize the count of schools in each category

### Answer:

a. 

```{r}
ct_schools <- ct_schools |>
   mutate(level_group = case_when(
     LEVEL == 1 ~ "Elementary",
     LEVEL == 2 ~ "Middle",
     LEVEL == 3 ~ "High",
     is.na(LEVEL) ~ "Missing",
     TRUE ~ "Other"
   )
  )

```

```{r}
ct_schools |>
  count(level_group)

```

b. 

```{r}
ct_schools <- ct_schools |>
   mutate(title_i_status = case_when(
     TITLEI == 1 ~ "Eligible",
     TITLEI == 2 ~ "Not Eligible",
     is.na(TITLEI) ~ "Missing",
     TRUE ~ "Other"
   ))

```

```{r}
ct_schools |>
  count(title_i_status)
```

## Problem 4: Racial composition

a. Create new variables that compute the percentage of students who are Black, White, Hispanic, Asian or another race (call this variable “other”), and the percentage of students receiving free OR reduced price lunch.

b. Visualize these data to see the variability of each of these variables (Hint: Use geom_histogram).

### Answer:

a:

```{r}
ct_schools <- ct_schools |>
  mutate(
    pct_white = WHITE / TOTETH * 100,
    pct_black = BLACK / TOTETH * 100,
    pct_hispanic = HISP / TOTETH * 100,
    pct_asian = ASIAN / TOTETH * 100,
    pct_other = 100 - pct_white - pct_black - pct_hispanic - pct_asian,
    pct_frpl = (FRELCH + REDLCH) / TOTETH * 100
  )

```

b. 

White:

```{r}
ggplot(ct_schools, aes(x = pct_white)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % White Students Across Schools",
     x = "Percent White Students",
     y = "Number of Schools") +
       theme_minimal()

```

This histogram for the percent of white students is skewed to the right which means that less schools have a larger percentage of white students. Out of all the percentages shown, 0% of white students is the most common distribution of white students in schools because in the histogram, you can see that 0% has more than 15 which is the highest bar there.

Black:

```{r}
ggplot(ct_schools, aes(x = pct_black)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % Black Students Across Schools",
     x = "Percent Black Students",
     y = "Number of Schools") +
       theme_minimal()

```


This histogram is also a little skewed to the right. This shows that 30% of black students is the most common percentage of students since it is above 15 schools.

Hispanic:

```{r}
ggplot(ct_schools, aes(x = pct_hispanic)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % Hispanic Students Across Schools",
     x = "Percent Hispanic Students",
     y = "Number of Schools") +
       theme_minimal()

```

This histogram is a little assymetric as the highest point is in the middle with the most number of schools having 45% of hispanic students. You can make an argument that it is skewed to the right with the way this histogram is set up.

Asian:

```{r}
ggplot(ct_schools, aes(x = pct_asian)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % Asian Students Across Schools",
     x = "Percent Asian Students",
     y = "Number of Schools") +
       theme_minimal()

```

This histogram is clearly skewed to the right. Most schools have 0% of asian students.

Other:

```{r}
ggplot(ct_schools, aes(x = pct_other)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % Other Students Across Schools",
     x = "Percent Other Students",
     y = "Number of Schools") +
       theme_minimal()

```

This distribution is also right skewed even though the tallest bar is in the middle. We can clearly see a huge dip when the distribution continues to the right.

Free Lunch:

```{r}
ggplot(ct_schools, aes(x = pct_frpl)) +
   geom_histogram(binwidth = 5, fill = "steelblue", color = "white") +
   labs(
     title = "Distribution of % Free Lunch Students Across Schools",
     x = "Percent Free Lunch Students",
     y = "Number of Schools") +
       theme_minimal()

```

Now this distribution, unlike the others, is skewed to the left. This means that the higher percentage has a positive relationship with the number of schools. The higher the percent of free lunch students, the higher the number of schools. 100% of free lunch students skyrockets compared to the rest of the data, but we can still see the increase in data in the histogram.

## Problem 5: 

Visualize the variation in the percent of students receiving free lunch (frelch) for magnet schools, TPS, and charter schools (Hint: Use geom_boxplot).

### Answer:

```{r}
ct_schools <- ct_schools |>
  mutate(pct_freelunch = FRELCH / TOTFRL * 100)
```

```{r}


ct_schools |>
  ggplot(aes(x = sch_type, y = pct_freelunch)) +
  geom_boxplot() +
  labs(
    title = "Percent of Students Receiving Free Lunch by School Type",
    x = "School Type",
    y = "Percent Free Lunch"
  )


```

The Charter boxplot shows a right skewed distribution since the top is larger than the bottom. The center is around 86-87 and there are no outliers.

The Magnet boxplot also shows a right skewed distribution and it also has an outlier of 67. The center is around 83.

The TPS boxplot shows a symmetrical distribution since both sides look identical and the same size, but it does actually have an outlier at around 53. The center is around 90-91.

## Problem 6: 

Visualize the variation in the percent of students of each race and ethnicity in the data file (Black, White, Hispanic, Asian and Other) for each of the type of schools (magnet, TPS and charter).

### Answer:

```{r}

library(tidyr)

race_data <- ct_schools |>
  select(sch_type, pct_white, pct_black, pct_hispanic, pct_asian, pct_other) |>
  pivot_longer(
    cols = starts_with("pct_"),
    names_to = "race",
    values_to = "percent"
  ) |>
  mutate(
    race = case_when(
      race == "pct_white" ~ "White",
      race == "pct_black" ~ "Black",
      race == "pct_hispanic" ~ "Hispanic",
      race == "pct_asian" ~ "Asian",
      race == "pct_other" ~ "Other"
    )
  )
```

```{r}
ggplot(race_data, aes(x = sch_type, y = percent)) +
  geom_boxplot() +
  facet_wrap(~ race, scales = "free_y") 
```

Since this is a lot of data, I'm just going to summarize it:

Asian:

+ Charter and Magnet schools boxplots have right skewed distribution
+ Charter has center of 0 and Magnet has center of 3.
+ TPS boxplot is asymmetrical with outlier of 25. Center is same as Magnet.

Black:

+ Charter boxplot is skewed left with center of around 84 and no outliers
+ Magnet boxplot looks asymmetrical, but can argue is skewed to the right with the top side being just a little bigger. Center is around 27 with no outliers.
+ TPS boxplot is asymmetrical with a center of 22-23 and 3 outliers: 66, 75, 84.

Hispanic:

+ Charter boxplot is skewed left with center of 12 or 13 and no outliers.
+ Magnet boxplot is skewed right with center of 28 and no outliers.
+ TPS boxplot is asymmetrical with center of 61 and no outliers.

Other:

+ Charter boxplot is skewed left with center of 2.6 and no outliers.
+ Magnet boxplot is asymmetrical but can argue is skewed left with the lower side being larger. It has a center of 4.375 and no outliers.
+ TPS boxplot is asymmetrical with center of 3.125 and an outlier of around 10.

White:

+ Charter boxplot is skewed right with center of almost 0 but just right above it and no outliers.
+ Magnet boxplot is asymmetrical with center of 28.125 and looks like 3 outliers: 6.25, 43.75, and 75.
+ TPS boxplot is skewed right with center of 22-23 and no outliers.

## Problem 7:

With more R skills what types of questions could you answer using this dataset?

### Answer:

With more R skills, I can possibly answer these questions:

+ How many schools are in the same city? or The percentage of schools in a certain city?
+ How many students are in a certain grade?
+ Are there more or less students/members in a certain area? 
+ Do title/non title schools have a majority of a certain race?
+ What is the student-ratio type in each school? And does the area have any affect on that?

## Problem 8:

What are some questions you have about this dataset? What information would you add to the dataset, if you could?

### Answer:

Some questions I have about this dataset are:

+ How accurate are the variables/data?
+ How are the types of school identified? Is it in their name?
+ What exactly are Title I schools?
+ If a student is mixed with ethnicities, what do they do?

What information can I add?:

+ Hair color
+ Test scores (Probably SAT's)
+ The school's area's weather
+ A student's main language

This project was a little more difficult than expected, but my friends really helped me. I also had some assistance with ChatGPT. I had to figure some stuff out on my own, but I got it done, and that's what helps us learn.

Also, when I realizd that there is a coding window that pops up and shows what I've voded, I just showed that instead of rewriting my code on the whole thing. It also shows the answers, so I also stopped rewriting the answers down since it's already there. It makes it look more clean and easier to read. 








